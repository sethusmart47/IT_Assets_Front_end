<div class="container clr-example">
  <h2 class="page-title">Employee Accessory Management</h2>

  <!-- Search Section -->
  <div class="search-bar">
    <input
      type="text"
      class="clr-input"
      [(ngModel)]="empCode"
      placeholder="Enter Employee Code"
    />
    <button class="btn btn-primary" (click)="fetchEmployee()">Search</button>
  </div>

  <div *ngIf="employee" class="employee-accessory-section">
    <!-- Left: Employee Details -->
    <div class="employee-card shadow">
      <h3>{{ employee.empName }}</h3>
      <p><strong>Employee Code:</strong> {{ employee.empCode }}</p>
      <p><strong>Email:</strong> {{ employee.empMail }}</p>
    </div>

    <!-- Right: Add Accessory -->
    <div class="accessory-form-card shadow">
      <h3 class="section-title">Add / Update Accessory</h3>


<div class="accessory-form card p-4">
  <div class="clr-row">
    <div class="clr-col-6 mt-3 p-5">
      <input
        type="text"
        [(ngModel)]="newAccessory.accessoryType"
        placeholder="Accessory Type"
        class="clr-input"
      />
    </div>
    <div class="clr-col-6 mt-3 p-5">
      <input
        type="text"
        [(ngModel)]="newAccessory.accessoryName"
        placeholder="Accessory Name"
        class="clr-input"
      />
    </div>
  </div>

  <div class="clr-row mt-3">
    <div class="clr-col-6">
      <input
        type="text"
        [(ngModel)]="newAccessory.serialNo"
        placeholder="Serial No"
        class="clr-input"
      />
    </div>
    <div class="clr-col-6 shadow-lg">
      <input
        type="date"
        [(ngModel)]="newAccessory.issueDate"
        class="clr-input"
      />
    </div>
  </div>

  <div class="clr-row mt-4">
    <div class="clr-col-12 text-center">
      <button class="btn btn-primary" (click)="addAccessory()">
        {{ editingAccessoryId ? 'Update' : 'Add' }}
      </button>
    </div>
  </div>
</div>

    </div>
  </div>

  <!-- Bottom: Accessories Table -->
  <div class="accessory-table-section">
    <h4 class="section-title">Accessories List</h4>

    <clr-datagrid class="clr-table">
      <clr-dg-column>Accessory Type</clr-dg-column>
      <clr-dg-column>Accessory Name</clr-dg-column>
      <clr-dg-column>Serial No</clr-dg-column>
      <clr-dg-column>Issue Date</clr-dg-column>
      <clr-dg-column>Actions</clr-dg-column>

      <clr-dg-row *ngFor="let item of accessories1">
        <clr-dg-cell>{{ item.accessoryType }}</clr-dg-cell>
        <clr-dg-cell>{{ item.accessoryName }}</clr-dg-cell>
        <clr-dg-cell>{{ item.serialNo }}</clr-dg-cell>
        <clr-dg-cell>{{ item.issueDate | date }}</clr-dg-cell>
        <clr-dg-cell>
          <button class="btn btn-sm btn-outline" (click)="editAccessory(item)">Edit</button>
          <button class="btn btn-sm btn-danger" (click)="deleteAccessory(item.id)">Delete</button>
        </clr-dg-cell>
      </clr-dg-row>

      <clr-dg-footer>
        <clr-dg-pagination #pagination [clrDgPageSize]="5">
          <clr-dg-page-size [clrPageSizeOptions]="[5, 10, 20]">
            Accessories per page
          </clr-dg-page-size>
          {{ pagination.firstItem + 1 }} - {{ pagination.lastItem + 1 }} of
          {{ pagination.totalItems }} accessories
        </clr-dg-pagination>
      </clr-dg-footer>
    </clr-datagrid>
  </div>
</div>

<!-- Accessories Table -->
<h4 class="section-title">Accessories</h4>

<table class="table table-striped table-bordered" *ngIf="accessories1.length > 0">
  <thead class="thead-dark">
    <tr>
      <th>Accessory Type</th>
      <th>Accessory Name</th>
      <th>Serial No</th>
      <th>Issue Date</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let item of accessories1">
      <td>{{ item.accessoryType }}</td>
      <td>{{ item.accessoryName }}</td>
      <td>{{ item.serialNo }}</td>
      <td>{{ item.issueDate | date: 'yyyy-MM-dd' }}</td>
      <td>
        <button class="btn btn-sm btn-outline-primary" (click)="editAccessory(item)">Edit</button>
        <button class="btn btn-sm btn-danger" (click)="deleteAccessory(item.id)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- No Data Message -->
<p *ngIf="accessories1.length === 0" class="text-muted mt-3">
  No accessories found for this employee.
</p>
